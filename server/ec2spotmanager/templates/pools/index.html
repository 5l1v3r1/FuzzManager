{% extends 'layouts/layout_base.html' %}

{% load url from future %}

{% block body_content %}
<div class="panel panel-default">
	<div class="panel-heading"><i class="glyphicon glyphicon-scale"></i> Instance Pools</div>
	<div class="panel-body">
		<table class="table table-condensed">
			<tr><td style="width: 150px;">Pool Daemon Status:</td><td>
				{% if daemonRunning %}
					<span class="label label-success">Running</span>
				{% else %}
					<span class="label label-danger">Not Running</span>
				{% endif %}
			</td></tr>
		</table>
		<div class="btn-group">
			<a href="{% url 'ec2spotmanager:poolcreate' %}" class="btn btn-default">Create Pool</a>
		</div>
		<br/>
		<hr/>
                <div>
			{% if isSearch %} 
				Your search matched {{ poollist|length }} instance pools:
			{% else %}
				Displaying all {{ poollist|length }} instance pools:
			{% endif %}
	        </div>
    </div>
    <table class="table table-condensed table-hover table-bordered table-db">
        <thead>
            <tr>
                <th style="width: 25px;">ID</th>
                <th style="width: 100px;">Name</th>
                <th style="width: 25px;"># of Instances</th>
                <th style="width: 150px;">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for pool in poollist %}
            <tr class="{% cycle odd,even %}">
                <td><a href="{% url 'ec2spotmanager:poolview' pool.pk %}">{{ pool.pk }} </a></td>
                <td>{{ pool.config.name }}</td>
                <td>{{ pool.size }}</td>
		<td>
			{% if pool.msgs %}
				{% for msg in pool.msgs %}
				<div>
					<a href="{% url 'ec2spotmanager:poolmsgdel' msg.pk %}">[x]</a>
					{% if msg.isCritical %}
					<span class="label label-danger">{{ msg.msg }}</span>
					{% else %}
					<span class="label label-warning">{{ msg.msg }}</span>
					{% endif %}
				</div>
            	    		{% endfor %}
			{% elif not pool.isEnabled %}
				<span class="label label-warning">Disabled</span>
			{% else %}
				<span class="label label-success">Healthy</span>
			{% endif %}
		</td>
            </tr>{% endfor %}
        </tbody>
    </table>
</div>
{% endblock body_content %}
