{% extends 'layouts/layout_base.html' %}

{% load url from future %}
{% load recursetags %}

{% block body_content %}
<div class="panel panel-default">
	<div class="panel-heading"><i class="glyphicon glyphicon-scale"></i> Pool Status</div>
	<div class="panel-body">
		<div class="field">
			<strong>Last Cycled:</strong>
				<span>{{ pool.last_cycled|date:"r" }}</span>

			<div class="field">
			    <strong>Instances:</strong>
			    <table id="signatureList" class="table table-bordered">
				<thead>
				    <tr>
					<th style="width: 80px;">Created</th>
					<th style="width: 20px;">EC2 Instance ID</th>
					<th style="width: 100px;">Hostname</th>
					<th style="width: 50px;">Status Code</th>
					<th style="width: 150px;">Status Data</th>
					<th style="width: 50px;">EC2 Region</th>
				    </tr>
				</thead>
				<tbody>
				  {% for instance in instances %}<tr class="{% cycle odd,even %}">
				    <td>{{ instance.created|date:"r" }}</td>
				    <td>{{ instance.ec2_instance_id|escape }}</td>
				    <td>{{ instance.hostname|escape }}</td>
				    <td>{{ instance.status_code|escape }} - {{ instance.status_code_text }}</td>
				    <td>{{ instance.status_data|escape }}</td>
				    <td>{{ instance.ec2_region|escape }}</td>
				    </tr>{% endfor %}
				</tbody>
			    </table>
			</div>
		</div>

		<div class="field">
			<strong>Actions:</strong>
			<a href="{% url 'ec2spotmanager:pooldel' pool.pk %}">Edit</a>
			-
			<a href="{% url 'ec2spotmanager:pooldel' pool.pk %}">Delete</a>
		</div>

		<div class="field">
			<strong>Configuration Hierachy: </strong>
		<ul>
			{% recurseconfig parent_config %}
			<li>
			<a href="{% url 'ec2spotmanager:configview' node.pk %}">{{ node.name }}</a>
				{% if node.child %}
					<ul>
						{{ children }}
					</ul>
				{% endif %}
			</li>
			{% endrecurseconfig %}
		</ul>
		</div>
	</div>
</div>
{% endblock body_content %}
