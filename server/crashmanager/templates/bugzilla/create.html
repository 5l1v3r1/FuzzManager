{% extends 'layouts/layout_1_column_full_width.html' %}
{% load url from future %}

{% block 1 %}

<script type="text/javascript" src="/static/js/bugzilla-template.js"></script>

<div class="panel">
	<div class="body notitle">
		{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

		{% if createTemplate %}
			<form action="{% url 'crashmanager:createtemplate' provider %}" method="post">
		{% else %}
			<select id="template" name="template">
			{% for t in templates %}
			    <option value="{{ t.pk }}" {% if t.pk == template.pk %}selected="selected"{% endif %}>{{ t.name }}</option>
			{% endfor %}
			</select>

			<p><strong>You are about to submit this information to: {{ hostname }}</strong></p>

			<form action="{% url 'crashmanager:createbug' entry.pk %}" method="post">
				<input type="hidden" name="entry" value="{{ entry.pk }}" />
		{% endif %}
		
		{% csrf_token %}

		<input type="hidden" name="provider" value="{{ provider }}" />
		
		{% if createTemplate %}
			<div class="field">
				<label class="label" for="id_name">Template Name:</label>
				<input id="id_name" maxlength="255" name="name" type="text" />
			</div>
		{% else %}
			<div class="field">
                               <label class="label" for="id_bugzilla_username">Bugzilla Username:</label>
                               <input id="id_bugzilla_username" name="bugzilla_username" type="text" value="{{ username|default:'' }}" />
			</div>
			<div class="field">
                               <label class="label" for="id_bugzilla_password">Bugzilla Password:</label>
                               <input id="id_bugzilla_password" name="bugzilla_password" type="password" />
			</div>
		{% endif %}

		{% include "bugzilla/form.html" %}

		<input type="submit" name="submit_save" value="Submit" />
		</form>
        </div>
</div>
{% endblock 1 %}
